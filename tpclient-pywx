
# wxPython imports
from wxPython.wx import *

# Python Imports
from math import *
from copy import *

# setup the path for the common stuff
import sys
sys.path.append("..")

from UserDict import UserDict
class NameMap(UserDict):
	def __init__(self, dict=None):
		self.data = {}
		if dict is not None:
			self.update(dict)

	def saveconfig(self, file, overwrite=1):
		if os.path.exists(file) and overwrite:
			os.remove(file)
		elif os.path.exists(file):
			raise IOError, "Mapping file (%s) already exists" % file
		
		f = open(file, 'w+')
		for ID in self.data.keys():
			f.write("%s %s\n" % (str(ID), self.data[i]) )

	def loadconfig(self, file):
		if not os.path.exists(file):
			raise IOError, "Mapping file (%s) doesn't exist" % file
		f = open(file)
		input = f.read()
		for line in string.split(input, '\n'):
			key = string.split(line[0])[0]
			self.data[key] = line[len(key):]

	def getName(self, name):
		if name in self.data.items():
			for i in self.data.keys():
				if self.data[i] == name:
					return i
		else:
			raise KeyError, "No such name in this mapping"

if __name__ == '__main__':

	class mainControl:
		def __init__(self, app):

			self.app = app

			##########
			# Load the windows
			##########
			#from windows.winConnect import winConnect
			from windows.winMain    import winMain
			from windows.winStarMap import winStarMap
			from windows.winMessage import winMessage
			from windows.winSystem  import winSystem
			
			self.main    = winMain(app, -1, None, (0,0), (1024-600-5,50))
			self.map     = winStarMap(self.main, -1, None, (1024-600,0), (600-5,500))
			self.message = winMessage(self.main, -1, None, (0,476), (1024-600-5,200))
			self.system  = winSystem(self.main, -1, None, (1024-600,523), (600-5,187))

		def show(self):
			##########
			# Show the main window
			##########
			self.main.Show(TRUE)
			self.map.Show(TRUE)
			self.message.Show(TRUE)
			self.system.Show(TRUE)

		def hide(self):
			##########
			# Show the main window
			##########
			self.main.Show(FALSE)
			self.map.Show(FALSE)
			self.message.Show(FALSE)
			self.system.Show(FALSE)
			

	class appTP(wxApp):
		def OnInit(self):
			wxInitAllImageHandlers()

			self.windows = mainControl(self)

			return TRUE
			

	app = appTP()
	app.MainLoop()
	
